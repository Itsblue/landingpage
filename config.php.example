<?php
/**
 * This is the configuration file of the Itsblue ldandingpage
 * 
 * Error codes:
 * 0000: Connecting to ldap server failed, this can also mean that the given host could not be parsed. 
 *       If you are using SSL this may also mean that your certificate could not be validated.
 * 0001: Binding to ldap admin failed, make sure your bind DN and password is correct
 * 0002: Ldap search failed, please check the userFilter!
 * 0003: Error while changing password, make sure you have ldapmodify installed
 * 0004: Error while changing email
 * 0005: It was not possible to find any page the user has access to
 * 0006: There was an error when tryin to establish a connection voer tls, please check your tls settings and apache log
 *       Please note: This error will only fire when using startTLS, when using SSL, error 0000 will fire instead!
 * If any of these occurs, make sure you have php-ldap 
 * installed on your system and check your apache log!
 * 
 * PHP Version 7.4
 * 
 * @category Utilities
 * @package  Landingpage
 * @author   Dorian Zedler <dorian@itsblue.de>
 * @license  GNU AGPL V3
 * @link     github.com/itsblue/landingpage
 */

defined('L_EXEC') or die();

$config = [];

$themeConfig['mainIcon'] = "https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/User_icon_1.svg/120px-User_icon_1.svg.png";
$config['theme'] = $themeConfig;

// LDAP
$ldapconfig['enable'] = false;
$ldapconfig['debug'] = false;

// For encrypted connections, there are two options:
// 1. Use SSL:
//   - your host will have to look like this: ldaps://<host>:636
//   - you will have to set useTls to false!
// 2. Use startTLS:
//   - your host will have to look like this: ldap://<host>:389
//   - you will have to set useTls to true!

$ldapconfig['host'] = 'ldap://<host>:<port>';
$ldapconfig['useTls'] = false;

// ignore invalid certificate errors
$ldapconfig['ignoreTlsCertificateErrors'] = false;

// force a specific CA certificate
$ldapconfig['tlsCaCertificatePath'] = '';

$ldapconfig['basedn'] = '';
$ldapconfig['binduser'] = '';
$ldapconfig['binduserPassword'] = '';
$ldapconfig['userFilter'] = '';
$ldapconfig['usernameField'] = 'samaccountname';
$ldapconfig['emailField'] = 'sophomorixCustom1';
$ldapconfig['displaynameField'] = 'displayname';

// A field containing the default password of the user 
// is used to force them to change it
$ldapconfig['firstPasswordField'] = 'sophomorixFirstPassword';

// A pattern to detect if a user still uses their default/placeholder email
// is used to force them to change it
$ldapconfig['firstEmailPattern'] = '/.*\@linuxmuster\.lan$/';

$config['ldap'] = $ldapconfig;

// Jitsi
$jitsiconfig['enable'] = false;
$jitsiconfig['host'] = '';
$jitsiconfig['applicationSecret'] = '';
$jitsiconfig['applicationId'] = '';
$jitsiconfig['limitToGroups'] = [];

$config['jitsi'] = $jitsiconfig;

// Links
$links['Wiki']['href'] = "https://www.wikipedia.org/";
$links['Wiki']['description'] = "This is Wikipedia";
$links['Wiki']['image'] = "https://de.wikipedia.org/static/images/project-logos/dewiki.png";
$links['Wiki']['limitToLdapGroup'] = "";

$config['links'] = $links;

?>
